{% liquid
   assign labelledBy = ''
   for block in section.blocks
     case block.type
      	when 'heading'
        	if block.settings.heading != blank
            	assign labelledBy = sectionid | append: '-heading'
   			endif
     endcase
   endfor
%}

{% case section.settings.layout %}
  {%- when "image-above" -%}
    <div class="relative py-12 bg-white" aria-labelledby="sectionid">
      <div class="max-w-2xl mx-auto text-center px-4 sm:px-6 lg:px-8 space-y-8">
        
        <div class="">
      		<img class="" src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1170&q=80" alt="About our products">
    	</div>
         
        {%- for block in section.blocks -%}
          {% case block.type %}
			{%- when 'heading' -%}
			  {% if block.settings.heading != blank %}
				<h2 id="{{ labelledBy }}" class="text-5xl" {{ block.shopify_attributes }}>
				  {{ block.settings.heading | escape }}
				</h2>
			  {% endif %}
			{%- when 'description' -%}
			  {% if block.settings.text != blank %}
				<div class="text-lg italic" {{ block.shopify_attributes }}>
				  {{ block.settings.text }}
				</div>
			  {% endif %}	
        	{%- when 'content' -%}
			  {%- if block.settings.heading != blank -%}
				<p class="text-lg" {{ block.shopify_attributes }}>
				  We pride ourselves on bringing our award-winning dishes to our customers. All of your favorite seasonal meals can be ordered online with pick up or delivery available. Order as much or as little as you like with great discounts for big orders. Please contact us if you have any questions.
				</p>
			  {% endif %}
			{%- when 'button' -%}
			  {%- if block.settings.heading != blank -%}
				<a{% if block.settings.heading != blank %} href="{{ block.settings.link }}"{% endif %} class="inline-flex bg-indigo-600 hover:bg-indigo-700 px-4 py-2 mr-4 text-white {% if block.settings.button_style_secondary %} button--secondary{% else %} button--primary{% endif %}"{% if block.settings.link == blank %} aria-disabled="true"{% endif %} {{ block.shopify_attributes }}>
				  {{ block.settings.heading | escape }}
				</a>
			  {%- endif -%}
          {% endcase %}
	  {% endfor %}
      </div>
    </div>
  {%- when "image-left", "image-right" -%}
    <div class="relative py-12 bg-white" aria-labelledby="{{ labelledBy }}">
      <div class="lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-2 lg:grid-flow-col-dense lg:gap-24 {% if section.settings.layout == "image-left" %} lg:col-start-1{% else %} lg:col-start-2{% endif %}">
        <div class="lg:mt-0 {% if section.settings.layout == "image-left" %} lg:col-start-1{% else %} lg:col-start-2{% endif %}">
          <div class="lg:px-0 lg:m-0 lg:relative lg:h-full">
            {%- if section.settings.image != blank -%}
              <img
                srcset="{%- if section.settings.image.width >= 165 -%}{{ section.settings.image | img_url: '165x' }} 165w,{%- endif -%}
                  {%- if section.settings.image.width >= 360 -%}{{ section.settings.image | img_url: '360x' }} 360w,{%- endif -%}
                  {%- if section.settings.image.width >= 535 -%}{{ section.settings.image | img_url: '535x' }} 535w,{%- endif -%}
                  {%- if section.settings.image.width >= 750 -%}{{ section.settings.image | img_url: '750x' }} 750w,{%- endif -%}
                  {%- if section.settings.image.width >= 1070 -%}{{ section.settings.image | img_url: '1070x' }} 1070w,{%- endif -%}
                  {%- if section.settings.image.width >= 1500 -%}{{ section.settings.image | img_url: '1500x' }} 1500w,{%- endif -%}"
                src="{{ section.settings.image | img_url: '1500x' }}"
                sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | divided_by: 2 }}px, (min-width: 750px) calc((100vw - 130px) / 2), calc((100vw - 50px) / 2)"
                alt="{{ section.settings.image.alt | escape }}"
                class="w-full shadow-xl lg:absolute lg:h-full lg:w-auto lg:max-w-none {% if section.settings.layout == "image-left" %} lg:right-0{% else %} lg:left-0{% endif %}"
                loading="lazy"
                width="{{ section.settings.image.width }}"
                height="{{ section.settings.image.height }}"
              >
            {%- else -%}
              {{ 'image' | placeholder_svg_tag: 'placeholder-svg bg-gray-100' }}
            {%- endif -%}
            {%- comment -%}
            	<img class="w-full shadow-xl lg:absolute {% if section.settings.layout == "image-left" %} lg:right-0{% else %} lg:left-0{% endif %} lg:h-full lg:w-auto lg:max-w-none" src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=662&amp;q=80" alt="About our products">
          	{%- endcomment -%}
          </div>
        </div>
        <div class="py-10 px-5 max-w-xl mx-auto sm:px-6 lg:py-48 lg:max-w-none lg:mx-0 lg:px-0 {% if section.settings.layout == "image-left" %} lg:col-start-2{% else %} lg:col-start-1{% endif %}">
          <div class="space-y-8 sm:px-10 md:px-0">       
            {%- for block in section.blocks -%}
              {% case block.type %}
                {%- when 'heading' -%}
                  {% if block.settings.heading != blank %}
                  <h2 id="{{ labelledBy }}" class="text-5xl" {{ block.shopify_attributes }}>
                    {{ block.settings.heading | escape }}
                  </h2>
                  {% endif %}
                {%- when 'description' -%}
                  {% if block.settings.text != blank %}
                  <div class="text-lg italic" {{ block.shopify_attributes }}>
                    {{ block.settings.text }}
                  </div>
                  {% endif %}	
                {%- when 'content' -%}
                  {%- if block.settings.heading != blank -%}
                  <p class="text-lg" {{ block.shopify_attributes }}>
                    We pride ourselves on bringing our award-winning dishes to our customers. All of your favorite seasonal meals can be ordered online with pick up or delivery available. Order as much or as little as you like with great discounts for big orders. Please contact us if you have any questions.
                  </p>
                  {% endif %}
                {%- when 'button' -%}
                  {%- if block.settings.heading != blank -%}
                    <a{% if block.settings.heading != blank %} href="{{ block.settings.link }}"{% endif %} class="inline-flex bg-indigo-600 hover:bg-indigo-700 px-4 py-2 mr-4 text-white {% if block.settings.button_style_secondary %} button--secondary{% else %} button--primary{% endif %}"{% if block.settings.link == blank %} aria-disabled="true"{% endif %} {{ block.shopify_attributes }}>
                      {{ block.settings.heading | escape }}
                    </a>
                  {%- endif -%}
              {% endcase %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
{% endcase %}

{% schema %}
{
	"name": "Image with Text",
	"tag": "section",
	"class": "image-with-text",
	"settings": [
	  {
		"type": "image_picker",
		"id": "image",
		"label": "Image",
		"info": "Suggested image sizes"
	  },
	  {
		"type": "select",
		"id": "layout",
        "label": "Layout",
		"default": "image-left",
        "options": [
		  {
			"value": "image-above",
			"label": "Image above"
		  },
		  {
			"value": "image-left",
			"label": "Image left"
		  },
		  {
			"value": "image-right",
			"label": "Image right"
		  }
		]
	  },
      {
        "type": "color",
        "id": "bg_color",
        "label": "Body text",
        "default": "#000000"
      }
	],
	"blocks": [
	  {
		"type": "heading",
		"name": "heading",
		"limit": 1,
		"settings": [
		  {
			"type": "text",
			"id": "heading",
			"label": "Heading",
			"default": "Image with text"
		  }
		]
	  },
	  {
		"type": "description",
		"name": "description",
		"limit": 1,
		"settings": [
		  {
			"type": "richtext",
			"id": "text",
			"label": "Text",
			"default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>"
		  }
		]
	  },
	  {
		"type": "content",
		"name": "Content",
		"settings": [
		  {
			"type": "text",
			"id": "heading",
			"label": "Note",
			"default": "Talk about your brand"
		  },
		  {
			"type": "richtext",
			"id": "text",
			"label": "Text",
			"default": "<p>Share information about your brand with your customers. Describe a product, make announcements, or welcome customers to your store.</p>"
		  }
		]
	  },
	  {
		"type": "button",
		"name": "Button",
		"limit": 3,
		"settings": [
		  {
			"type": "text",
			"id": "heading",
			"label": "Button label",
			"default": "Button label"
		  },
		  {
			"type": "url",
			"id": "link",
			"label": "Button link"
		  }
		]
	  }
	],
	"presets": [
	  {
		"name": "Image with text 2",
		"blocks": [
		  {
			"type": "heading"
		  },
		  {
			"type": "description"
		  },
		  {
			"type": "content"
		  },
		  {
			"type": "button"
		  }
		]
	}]
}
{% endschema %}
